extends ../layout

block headerscripts
  script(src='//ajax.googleapis.com/ajax/libs/angularjs/1.2.16/angular.js')
  script(src='//ajax.googleapis.com/ajax/libs/angularjs/1.2.16/angular-resource.js')
  script(src='//ajax.googleapis.com/ajax/libs/angularjs/1.2.16/angular-route.js')

block content
  .row: .col-xs-12
    .panel.panel-default(ng-app="edit")
      base(href="/admin/")
      div(ng-init="collection='gender'")
        div(ng-controller="EditController")
          .panel-heading Gender <b>#{gender.label}</b>
          .panel-body
            form.js-form.form-horizontal(role='form')

              fieldset
                .form-group.has-feedback
                  label.col-sm-2.col-sm-offset-1.control-label(for='form-label') Label
                  .col-sm-8
                    input#form-name.form-control.js-input(type='text', name='label', value="#{gender.label}")

                .form-group
                  label.col-sm-2.col-sm-offset-1.control-label(for='#form-code') Code
                  .col-sm-8
                    input#form-nickname.form-control.js-input(type='text', name='code', value="#{gender.code}")

                button.btn.btn-danger(ng-click="undo()") Undo
                button.btn.btn-primary(ng-click="save()") Save


block scripts

  script
    :coffee
      console.log 'gender hallo'

      angular.module("edit", ["ngResource", "ngRoute"])
        .controller "EditController", [
          "$scope", "$resource", '$routeParams',
          ($scope, $resource, $routeParams) ->

            $scope.undo = () ->
              console.log "bop"

            $scope.save = () ->
              console.log "beep"

            model = $scope.collection
            resource = $resource '/api/:model', {model}

            doc = resource.query { "_id" : $routeParams.id }, ->
              $scope.doc = doc
              console.log doc
        ]
