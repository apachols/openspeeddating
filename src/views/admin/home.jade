extends ../layout

block content
  div(ng-app="admin")
    .row:.col-xs-12
      .panel.panel-default
        .panel-heading Users
        .panel-body(ng-controller="AdminController")
          h1 {{sometext}}
          table.table.table-striped
            thead
              tr
                th Email
                th Salt
            tbody
              each user in users
                tr
                  td: a(href="/admin/user/#{user.email}") #{user.email}
                  td: code #{user.salt}

block scripts
  script
    :coffee
      console.log 'HAI DENNY'

      angular.module("admin", ["adminServices"])
        .controller "AdminController", ["$scope", "thing", ($scope, thing) ->
          $scope.sometext = thing.thang()
        ]

      # /api/:model POST takes an object for add
      # /api/:model GET takes an object for query
      # /api/:model PUT
      # /api/:model DELETE
      angular.module("adminServices", ["ngResource"])
        .service "thing", () ->
          @thang = () ->
            return "HAI DENNY"
          return @